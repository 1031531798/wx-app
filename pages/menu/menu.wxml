<!--pages/menu.wxml-->
<view class="menu-index">
  <view class="menu-header">
    <image class="header-img" src="/src/image/headimg.jfif" mode="aspectFill"></image>
  </view>
  <view class="menu-content">
    <scroll-view class="menu-left" enable-flex="true" scroll-y="true">
      <van-sidebar active-key="{{ activeKey }}" bind:change="changeMenu">
        <van-sidebar-item title="{{item.label}}" wx:for="{{navList}}" wx:for-index="key" wx:for-item="item" wx:key="key" data-index = '{{key}}' bindtap="clickNav"/>
      </van-sidebar>
    </scroll-view>
    <scroll-view class="menu-body" enable-flex="true" scroll-y="true">
      <view wx:for="{{orderList[navIndex]}}" wx:for-index="key" wx:for-item="item" wx:key="key" data-index = '{{key}}' class="menu-body-item" enable-flex="true" bindscrolltolower="scrollBottom">
        <van-card
          tag="{{item.tag}}"
          price="{{item.price}}"
          desc="描述信息"
          title="{{item.title}}"
          thumb="{{ item.imageURL }}"
        >
          <view slot="num" class="order-item-btn-group">
            <van-icon name="minus" class="order-item-btn" wx:if="{{shoppingList[item.id].num > 0}}" bindtap="delectItem" data-index="{{key}}" data-shopid="{{item.id}}"/>
            <view wx:if="{{shoppingList[item.id].num > 0}}" class="order-item-price">{{shoppingList[item.id].num}}</view>
            <van-icon name="plus" class="order-item-btn" bindtap="addItem" data-index="{{key}}"
             data-shopid="{{item.id}}"/>
          </view>
        </van-card>
      </view>
    </scroll-view>
  </view>
  <view class="shopping-body">
    <view class="shopping-image">
      <van-icon name="shopping-cart-o" size="80rpx" color="white" info="{{shoppingListSize}}"/>
    </view>
    <view class="shopping-price">
      ￥{{priceTotal}}
    </view>
    <view class="shopping-btn">
      <van-button type="primary" bindtap="selected" block>选好了</van-button>
    </view>
  </view>
</view>